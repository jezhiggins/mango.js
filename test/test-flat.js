const from = require("../rillet.js").from;
const t = require("./t.js");

const array = [1,2,3,4];

describe("flat", () => {
  t("flat([1,2,3,4])",
    from(array).flat(),
    array
  );
  t("flat([1,2,3,4], 1)",
    from(array).flat(1),
    array
  );
  t("flat([1,2,3,4], 5)",
    from(array).flat(5),
    array
  );

  t("flat([[1, 2], [3, 4]])",
    from([[1, 2], [3, 4]]).flat(),
    [[1,2],[3,4]]
  );
  t("flat([[1, 2], [3, 4]], 1)",
    from([[1, 2], [3, 4]]).flat(1),
    [[1,2],[3,4]]
  );
  t("flat([[1, 2], [3, 4]], 2)",
    from([[1, 2], [3, 4]]).flat(2),
    [1,2,3,4]
  );
  t("flat([[1, 2], [3, 4]], 3)",
    from([[1, 2], [3, 4]]).flat(3),
    [1,2,3,4]
  );
  t("flat([[1, 2], [3, 4]], 4)",
    from([[1, 2], [3, 4]]).flat(4),
    [1,2,3,4]
  );

  t("flat([[[[1],2],3],4])",
    from([[[[1],2],3],4]).flat(),
    [[[[1],2],3],4]
  );
  t("flat([[[[1],2],3],4], 1)",
    from([[[[1],2],3],4]).flat(1),
    [[[[1],2],3],4]
  );
  t("flat([[[[1],2],3],4], 2)",
    from([[[[1],2],3],4]).flat(2),
    [[[1],2],3,4]
  );
  t("flat([[[[1],2],3],4], 3)",
    from([[[[1],2],3],4]).flat(3),
    [[1],2,3,4]
  );
  t("flat([[[[1],2],3],4], 4)",
    from([[[[1],2],3],4]).flat(4),
    [1,2,3,4]
  );

  t("flat([1,[2,[3,[4]]]])",
    from([1,[2,[3,[4]]]]).flat(),
    [1,[2,[3,[4]]]]
  );
  t("flat([1,[2,[3,[4]]]], 1)",
    from([1,[2,[3,[4]]]]).flat(1),
    [1,[2,[3,[4]]]]
  );
  t("flat([1,[2,[3,[4]]]], 2)",
    from([1,[2,[3,[4]]]]).flat(2),
    [1,2,[3,[4]]]
  );
  t("flat([1,[2,[3,[4]]]], 3)",
    from([1,[2,[3,[4]]]]).flat(3),
    [1,2,3,[4]]
  );
  t("flat([1,[2,[3,[4]]]], 4)",
    from([1,[2,[3,[4]]]]).flat(4),
    [1,2,3,4]
  );

  t("flat([1, 2, [[[[3]]]], 4, 5], 1)",
    from([1, 2, [[[[3]]]], 4, 5]).flat(1),
    [1,2,[[[[3]]]],4,5]
  );
  t("flat([1, 2, [[[[3]]]], 4, 5], 0)",
    from([1, 2, [[[[3]]]], 4, 5]).flat(0),
    [1,2,[[[[3]]]],4,5]
  );
  t("flat([1, 2, [[[[3]]]], 4, 5], -1)",
    from([1, 2, [[[[3]]]], 4, 5]).flat(-1),
    [1,2,[[[[3]]]],4,5]
  );
  t("flat([1, 2, [[3]], 4, 5], 3)",
    from([1, 2, [[3]], 4, 5]).flat(3),
    [1,2,3,4,5]
  );
  t("flat([1, 2, [[[[3]]]], 4, 5], 5)",
    from([1, 2, [[[[3]]]], 4, 5]).flat(5),
    [1,2,3,4,5]
  );
});
